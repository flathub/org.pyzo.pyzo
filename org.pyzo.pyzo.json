{
  "app-id" : "org.pyzo.pyzo",
  "runtime" : "org.kde.Platform",
  "runtime-version" : "5.15",
  "sdk" : "org.kde.Sdk",
  "command" : "pyzo",
  "finish-args" : [
    "--share=ipc",
    "--socket=x11",
    "--share=network",
    "--device=dri",
    "--socket=wayland",
    "--filesystem=host",
    "--talk-name=com.canonical.AppMenu.Registrar",
    "--talk-name=com.canonical.AppMenu.Registrar.*"
  ],
  "modules" : [
    {
      "name": "python3-packaging",
      "buildsystem": "simple",
      "build-commands": [
        "python3 setup.py install --prefix=${FLATPAK_DEST} --root=/ --optimize=1"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://files.pythonhosted.org/packages/d0/63/68dbb6eb2de9cb10ee4c9c14a0148804425e13c4fb20d61cce69f53106da/packaging-24.2.tar.gz",
          "sha256": "c228a6dc5e932d346bc5739379109d49e8853dd8223571c7c5b55260edc0b97f"
        }
      ]
    },
    {
      "name": "python3-Pyparsing",
      "buildsystem": "simple",
      "build-commands": [
        "python3 setup.py install --prefix=${FLATPAK_DEST} --root=/ --optimize=1"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://files.pythonhosted.org/packages/ad/f5/dc2e7ca1e6ca1a0d51e8cd78c2c9ee1e0d0c1bab1e50ef0c6b3ccb8ea6ae/pyparsing-3.2.5.tar.gz",
          "sha256": "00b2a87a8a6a7e5c2fcfe3f9b50cc8c7ad86c4821a35fc7c2e9f65dfd29bb81a"
        }
      ]
    },
    {
      "name": "python3-toml",
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python3.8/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "python3 setup.py install --prefix=${FLATPAK_DEST} --root=/ --optimize=1"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://files.pythonhosted.org/packages/be/ba/1f744cdc819428fc6b5084ec34d9b30660f6f9daaf70eead706e3203ec3c/toml-0.10.2.tar.gz",
          "sha256": "b3bda1d108d5dd99f4a20d24d9c348e91c4db7ab1b749200bded2f839ccbe68f"
        }
      ]
    },
    {
      "name": "sip",
      "buildsystem": "simple",
      "build-commands": [
        "python3 setup.py install --prefix=/app --root=/"
      ],
      "cleanup": [
        "/bin"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://files.pythonhosted.org/packages/4d/34/b06f5f83074eeb5e1bc2e65e0c4f78e5d46c6f2f33d1f29c94ecf5d89d79/sip-6.14.0.tar.gz",
          "sha256": "37f3f6e9e735437f4ac0d0c6b15c5fbec7b93fa59a9e17fd0b0b7b23d9cc6c48"
        }
      ]
    },
    {
      "name": "PyQt5_sip",
      "buildsystem": "simple",
      "build-commands": [
        "python3 setup.py install --prefix=/app --root=/"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://files.pythonhosted.org/packages/04/07/3fa8cff3a88f54c8e8ed92584c9cdbfd1e9917a7ac2f2eff5ca6daeb90cf/PyQt5_sip-12.17.1.tar.gz",
          "sha256": "8a2b2799c3a3dda9e60f2bfc09c68ad2b0a2b3b3ab86e4c4f2b0e026e1e5a120"
        }
      ]
    },
    {
      "name": "PyQt5",
      "buildsystem": "simple",
      "build-options": {
          "arch": {
              "aarch64": {
                  "env": {
                      "DISABLE_DESKTOP_OPENGL": "--disable-feature=PyQt_Desktop_OpenGL"
                  }
              }
          }
      },
      "build-commands": [
        "PYVER=$(python3 -c \"import sys;print(sys.version_info[1])\") && QMAKEPATH=/app/lib python3 configure.py --confirm-license --bindir=/app/bin --destdir=/app/lib/python3.${PYVER}/site-packages --sipdir=/app/share/sip --stubsdir=/app/lib/python3.${PYVER}/site-packages/PyQt5 --no-designer-plugin --no-qml-plugin --no-python-dbus --no-tools --enable=QtCore --enable=QtGui --enable=QtNetwork --enable=QtWidgets ${DISABLE_DESKTOP_OPENGL}",
        "make -j $FLATPAK_BUILDER_N_JOBS",
        "make install"
      ],
      "cleanup": [
        "/bin"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://files.pythonhosted.org/packages/4d/5b/b7bc90e29e14d9324965951c5b54cf4d20597b90e43ba77d28a1b17f889c/PyQt5-5.15.11.tar.gz",
          "sha256": "ffa6b8e4b11dbc7045df6efe0c93a2bf4eef8d12eeb3b98f05ef96c9024e2b8a"
        }
      ]
    },
    {
      "name" : "python3-pyzo",
      "buildsystem" : "simple",
      "build-commands" : [
        "pip3 install --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} pyzo",
        "install -Dm644 org.pyzo.pyzo128x128.png /app/share/icons/hicolor/128x128/apps/org.pyzo.pyzo.png",
        "install -Dm644 org.pyzo.pyzo64x64.png /app/share/icons/hicolor/64x64/apps/org.pyzo.pyzo.png",
        "install -Dm644 org.pyzo.pyzo.desktop /app/share/applications/org.pyzo.pyzo.desktop",
        "install -Dm644 org.pyzo.pyzo.appdata.xml /app/share/appdata/org.pyzo.pyzo.appdata.xml"
      ],
      "sources" : [
        {
          "type" : "file",
          "path" : "org.pyzo.pyzo.desktop"
        },
        {
          "type" : "file",
          "path" : "org.pyzo.pyzo.appdata.xml"
        },
        {
          "type" : "file",
          "path" : "org.pyzo.pyzo64x64.png"
        },
        {
          "type" : "file",
          "path" : "org.pyzo.pyzo128x128.png"
        },
        {
          "type" : "file",
          "url" : "https://files.pythonhosted.org/packages/ea/67/e48e4c6a5b7c1c2f96addf14c94ad9c1d71cf3ae95fbe0ec0f9e0cb1e1cb/pyzo-4.20.0.tar.gz",
          "sha256" : "4a5d9c99f8dfa3cc27c45fad9cf2d90ed24a3a6e34b7f0c9d70e9f8c36bbda66"
        }
      ]
    }
  ]
}
